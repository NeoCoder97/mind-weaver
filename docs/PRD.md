# MindWeaver 产品需求文档

## 1. 产品概述

**MindWeaver** 是一款个人知识管理和动态监控工具，帮助用户自动聚合、过滤、管理和推送来自多个 RSS/Atom 订阅源的内容。

### 核心价值
- 自动抓取订阅源更新，无需手动访问各个网站
- 智能去重和过滤，减少信息噪音
- 分类管理，有序组织信息来源
- AI 摘要生成，快速获取要点
- 邮件推送，随时随地获取更新

---

## 2. 功能模块

### 2.1 订阅源管理

#### 功能描述
用户可以添加、编辑、删除 RSS/Atom 订阅源，对订阅源进行分类和组织。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 添加订阅源 | 输入 URL 自动识别订阅源名称和描述 |
| 编辑订阅源 | 修改订阅源名称、描述、抓取间隔 |
| 删除订阅源 | 删除不再需要的订阅源（保留历史条目） |
| 启用/禁用 | 临时停止某订阅源的抓取 |
| 手动抓取 | 立即从订阅源获取最新内容 |
| 查看状态 | 显示最后抓取时间、错误次数、健康状态 |
| 分配分类 | 将订阅源归类到不同分类中 |
| 设置抓取频率 | 自定义每个订阅源的抓取间隔（分钟） |

---

### 2.2 分类管理

#### 功能描述
用户可以创建分类来组织订阅源，方便按主题查看内容。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 创建分类 | 自定义分类名称、描述 |
| 设置外观 | 选择分类颜色和图标 |
| 启用/禁用 | 临时隐藏某分类下的内容 |
| 查看统计 | 查看分类下的订阅源数量、条目数量 |
| 按分类浏览 | 只查看特定分类的内容 |

---

### 2.3 内容浏览与管理

#### 功能描述
用户可以浏览所有抓取的内容条目，进行搜索、筛选和操作。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 内容列表 | 分页展示所有条目，按时间倒序 |
| 全文搜索 | 在标题和内容中搜索关键词 |
| 按订阅源筛选 | 只查看某个订阅源的内容 |
| 按分类筛选 | 只查看某个分类的内容 |
| 查看详情 | 点击条目查看完整内容 |
| 标记已读/未读 | 手动标记条目阅读状态 |
| 删除条目 | 删除不需要的条目 |
| 批量操作 | 批量删除、批量标记已读/未读 |

---

### 2.4 过滤规则

#### 功能描述
用户可以设置过滤规则，自动过滤不需要的内容。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 关键词过滤 | 包含/不包含特定关键词的内容 |
| 正则表达式 | 使用正则表达式匹配内容 |
| 标签过滤 | 根据文章标签过滤 |
| 语言过滤 | 只保留特定语言的内容 |
| 字段选择 | 可对标题、内容、作者、标签进行过滤 |
| 规则优先级 | 设置规则执行顺序 |
| 启用/禁用规则 | 临时启用或禁用某条规则 |

---

### 2.5 AI 摘要与关键词

#### 功能描述
系统可以自动提取关键词和生成摘要，帮助用户快速了解文章内容。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 关键词提取 | 自动提取文章核心关键词 |
| 提取式摘要 | 从原文中提取关键句子 |
| AI 摘要 | 使用大模型生成精简摘要 |
| 批量处理 | 一键为多个条目生成摘要/提取关键词 |

---

### 2.6 邮件推送

#### 功能描述
系统可以定期发送摘要邮件，将最新内容推送到用户邮箱。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 定时推送 | 设置每日固定时间发送（如 10:00、16:00） |
| 手动触发 | 立即生成并发送摘要邮件 |
| 聚合模式 | 将所有订阅源内容聚合为一封邮件 |
| 独立模式 | 每个订阅源单独发送邮件 |
| AI 摘要 | 邮件中包含 AI 生成的聚合摘要 |
| 多收件人 | 支持发送到多个邮箱地址 |
| 自定义主题 | 设置邮件主题前缀 |
| 发送记录 | 查看历史发送记录和状态 |

---

### 2.7 数据管理

#### 功能描述
用户可以导出数据或清理旧数据，控制存储空间。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 导出条目 | 将所有条目导出为 JSON 文件 |
| 导出订阅源 | 将订阅源配置导出为 JSON 文件 |
| 清理旧数据 | 按天数删除指定时间之前的条目 |
| 查看数据库大小 | 显示当前数据库文件大小 |

---

### 2.8 系统监控

#### 功能描述
仪表板提供系统整体状态和统计信息。

#### 具体功能
| 功能 | 说明 |
|------|------|
| 统计概览 | 显示总条目数、订阅源数、分类数、规则数 |
| 今日新增 | 显示今日新增条目数量 |
| 最近活动 | 显示最近的系统操作记录 |
| 订阅源健康 | 显示各订阅源的抓取状态和错误情况 |
| 调度器状态 | 显示后台任务是否运行 |
| 控制调度器 | 启动/停止后台抓取任务 |
| 一键全量抓取 | 手动触发所有订阅源的抓取 |

---

### 2.9 系统设置

#### 功能描述
用户可以配置系统的各项参数，优化使用体验。

#### 具体功能
| 功能 | 说明 |
|------|------|
| LLM 配置 | 配置 AI 服务（OpenAI/ZhipuAI/DeepSeek） |
| 邮件配置 | 配置 SMTP 邮件服务器 |
| 摘要配置 | 设置摘要发送时间和频率 |
| 时区设置 | 选择显示时区 |
| 测试连接 | 测试 LLM 和邮件服务连接 |
| 数据库大小 | 查看当前数据库占用空间 |

---

## 3. 用户体验

### 3.1 界面特性
- **响应式设计** - 支持桌面端访问
- **实时反馈** - 操作成功/失败即时提示
- **键盘快捷键** - 支持快捷键提升操作效率

### 3.2 快捷键列表
| 快捷键 | 功能 |
|--------|------|
| `?` | 显示快捷键帮助 |
| `Escape` | 关闭当前弹窗 |
| `r` | 刷新仪表板数据 |
| `s` | 保存设置页面 |

---

## 4. 业务流程

### 4.1 典型使用流程
```
1. 添加订阅源 → 输入 RSS URL
2. 分配分类 → 选择或创建分类
3. 设置过滤规则 → 过滤不感兴趣的内容
4. 系统自动抓取 → 按设定间隔定期获取
5. 浏览内容 → 在首页查看最新条目
6. 配置邮件推送 → 设置定时发送摘要
```

### 4.2 内容处理流程
```
订阅源更新
    ↓
抓取内容
    ↓
解析标准化
    ↓
去重检测（标题/链接/内容）
    ↓
规则过滤
    ↓
存储到数据库
    ↓
（可选）提取关键词/生成摘要
    ↓
用户查看 / 邮件推送
```

---

## 5. 使用场景

### 5.1 个人资讯聚合
- 关注多个技术博客、新闻网站的 RSS
- 统一查看所有更新，无需逐个访问

### 5.2 研究资料收集
- 添加学术期刊、研究机构的订阅源
- 使用关键词搜索和过滤功能筛选相关内容
- AI 摘要帮助快速了解文章要点

### 5.3 行业动态监控
- 订阅行业媒体、公司博客的更新
- 定时邮件推送确保不错过重要信息
- 分类管理便于按主题查看

---

## 6. 核心优势

| 优势 | 说明 |
|------|------|
| 自动化 | 无需手动访问各网站，自动获取更新 |
| 去重 | 智能识别重复内容，避免信息冗余 |
| 过滤 | 灵活的规则系统，过滤无关内容 |
| AI 增强 | 大模型摘要，快速获取要点 |
| 邮件推送 | 定时推送，随时随地获取信息 |
| 分类管理 | 有序组织订阅源，便于浏览 |
| 可控性 | 完全掌控数据，支持导出和清理 |

---

## 7. 功能优先级

### P0 - 核心功能
- 订阅源管理（添加、编辑、删除、启用/禁用）
- 内容抓取和解析
- 内容浏览和搜索

### P1 - 重要功能
- 分类管理
- 去重功能
- 过滤规则
- 系统监控仪表板

### P2 - 增强功能
- AI 摘要和关键词提取
- 邮件推送
- 数据导出和清理

### P3 - 辅助功能
- 键盘快捷键
- 统计分析
- 外观自定义
